<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>Prevent_Cancelling_Course_With_Bookings</fullName>
    <active>true</active>
    <description>Prevent user changing Course Status to &#39;Cancelled&#39; if any of Reserved_Places__c, Enquiries__c or Confirmed_Places__c are &gt; 0</description>
    <errorConditionFormula>AND( 
    ISPICKVAL( Status__c , &quot;Cancelled&quot;),
    OR(
       Reserved_Places__c  &gt; 0,
       Enquiries__c &gt; 0,
       Confirmed_Places__c &gt; 0
    ),
    NOT($Permission.Override_Course_Validation)
)</errorConditionFormula>
    <errorDisplayField>Status__c</errorDisplayField>
    <errorMessage>Course cannot be cancelled while there are Enquiries, Reservations or Bookings still in place.</errorMessage>
</ValidationRule>
