<apex:page applyHtmlTag="true" docType="html-5.0" standardController="Contact" extensions="NctETMembershipPaymentPageController" showHeader="false" sidebar="false">
    <apex:pageMessages id="error-message"/>
   <apex:form id="membrShpForm">
   <apex:actionFunction name="SelValFunction" action="{!contactInfo}" oncomplete="onComplete();" reRender="nameDisplay,membershipTypeInfo,membershipFeeInfo,membershipFeeValue,displayValues">
       <apex:param id="selValId" name="seltdName" value="" assignTo="{!accountInformation.feeAmount}"/>
       <apex:param id="lifeMembershipVal" name="lifeMembershipName" value="" />
           </apex:actionFunction>
    <apex:actionFunction name="onComplete" action="{!onCompleteContactInfo}" reRender="onComplete">
   </apex:actionFunction>
    <apex:actionFunction name="giftAidCreation" action="{!giftAidCreation}" reRender="nameDisplay,membershipTypeInfo,membershipFeeInfo,membershipFeeValue,displayValues">
        <apex:param id="giftVal" name="giftName" value="" assignTo="{!booleanChecking.isGiftAid}"/>
   </apex:actionFunction>
   <apex:actionFunction name="membershipDupeChecker" action="{!membershipDupeChecker}" reRender="isMembershipExists">
       <apex:param id="emailDupeVal" name="emailDupeVal" value=""/>
   </apex:actionFunction>
    <apex:actionFunction name="thankYouPage" action="{!thankYouSec}" reRender="membershipNumber,membershipText">
   </apex:actionFunction>
   <apex:actionFunction name="postCodeVal" action="{!nctBranchs}" reRender="branch_Picklist,isMembershipExists">
        <apex:param id="postVal" name="postVal" value="" />
       <apex:param id="emailsVal" name="emailsVal" value=""/>
   </apex:actionFunction>
   <apex:actionFunction name="saveRecordValues" action="{!paymentSave}" reRender="displayValues">
      <apex:param id="accname" name="accname" value="" assignTo="{!accountInformation.accountName}"/>
       <apex:param id="sortCode" name="sortCode" value="" assignTo="{!accountInformation.sortCode}"/>
       <apex:param id="accNum" name="accNum" value="" assignTo="{!accountInformation.accountNumber}"/>
       <apex:param id="gftAid" name="gftAid" value="" assignTo="{!booleanChecking.isGiftAid}"/>
    </apex:actionFunction>
    <apex:actionFunction name="afunction" action="{!receiveInput}" reRender="selMembership,membershipNumber,membershipText,smsOpt,postOpt,emailOpt,doNotCallOpt,isMembershipExists,error-message">
        <apex:param id="aname" name="chkbox" value="" assignTo="{!booleanChecking.twomems}"/>
        <apex:param id="firstName" name="firstName" value="" assignTo="{!Contact.firstname}"/>
        <apex:param id="lastName" name="lastName" value="" assignTo="{!Contact.lastname}"/>
        <apex:param id="emailVal" name="emailVal" value="" assignTo="{!Contact.email}"/>
        <apex:param id="phoneVal" name="phoneVal" value="" assignTo="{!Contact.phone}"/>
        <apex:param id="secondContactFirstName" name="secondContactFirstName" value="" assignTo="{!secondContact.secondContactFirstName}"/>
        <apex:param id="secondContactLastName" name="secondContactLastName" value="" assignTo="{!secondContact.secondContactLastName}"/>
        <apex:param id="secondContactEmailVal" name="secondContactEmailVal" value="" assignTo="{!secondContact.secondContactEmail}"/>
        <apex:param id="secondContactPhoneVal" name="secondContactPhoneVal" value="" assignTo="{!secondContact.secondContactPhone}"/>
        <apex:param id="postcodeval" name="postcodeval" value="" assignTo="{!Contact.MailingPostalCode}"/>
        <apex:param id="duedate" name="dueDate" value="" assignTo="{!contactVo.eDate}"/>
        <apex:param id="selBranchVal" name="selBranchVal" value="" assignTo="{!Contact.Branch__c}"/>
        <apex:param id="genderVal" name="genderVal" value="" />
        <apex:param id="streetVal" name="streetVal" value="" assignTo="{!Contact.MailingStreet}"/>
        <apex:param id="streetVal1" name="streetVal1" value="" assignTo="{!contactVo.streetValue1}"/>
        <apex:param id="streetVal2" name="streetVal2" value="" assignTo="{!contactVo.streetValue2}"/>
        <apex:param id="townVal" name="twonVal" value="" assignTo="{!Contact.MailingState}"/>
        <apex:param id="countyVal" name="countyVal" value="" assignTo="{!Contact.MailingCity}"/>
    </apex:actionFunction>
   <head>
        <meta charset="utf-8"/>
        <title>NCT</title>
        <meta name="description" content=""/>
        <meta name="viewport" content="width=device-width, initial-scale=1"/>
        <link rel="icon" type="image/png" href="assets/nct_logo.jpg"/>
        <apex:stylesheet value="{!URLFOR('https://fonts.googleapis.com/css?family=Open+Sans')}"/>
        <apex:stylesheet value="{!URLFOR($Resource.nctapp, 'nct-app/css/bootstrap.min.css')}"/>
        <apex:stylesheet value="{!URLFOR($Resource.nctapp, 'nct-app/css/font-awesome.min.css')}"/>
        <apex:stylesheet value="{!URLFOR($Resource.nctapp, 'nct-app/css/style.css')}"/>
        <!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>-->
        <apex:includeScript value="{!URLFOR('https://www.google-analytics.com/analytics.js')}"/>
		<script>
            window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
            	ga('create', 'UA-1436592-20', 'auto');
            	ga('send', 'pageview');
                ga(function(){
                console.log(ga.getAll());
               });
		</script>
        <style>
            @media (min-width: 1200px){
                .container {
                    max-width: 1140px;
                    padding-left: 6%;
                    padding-right: 6%;
                }
            }
            /* new styles start here */
            #pay_now_back, #direct_pay_back{
                background-image: url(../assets/back_button.png);
                background-size: 94%;
                background-repeat: no-repeat;
                text-indent: -1000px;
                transition: all 0.4s;
                background-position: center;
                height: 90px;
            }
            #pay_now_back:hover, #direct_pay_back:hover{
                background-image: url(../assets/back_button_over.png);
            }
            .nct-mebmber-logo{
                padding: 15px 15px;
            }
            .green-bg-image::after{
                position: absolute;
                display: block;
                height: 0.81rem;
                width: 100%;
                background-image: url(../assets/header-border-bottom.png);
                background-repeat: no-repeat;
                -webkit-background-size: 100% 1.25rem;
                background-size: 100% 1.25rem;
                background-position: bottom;
                content: "";
                z-index: 1;
            }
            .back-btn{
                background-color: #008669;
                color: #fff;
                width: 38px;
                min-width: 38px;
                height: 38px !important;
                border-radius: 50%;
                background-image: none !important;
                text-indent: 0 !important;
            }
            .loader{
                padding-top: 25px;
            }
			#membership-loader, #membershiptype-loader{
              display:none;
            }
            .show-loader {
            	display:inline-block !important;
                font-weight:bold;
            }
            .show-loader img {
            	height: 100px;
            }
            .loader > div{
                padding-top: 25px;
            }
            .green-button{
                background-color: #008669;
                margin:0;
            }
            #scd1, #scd2, #scd3{
                width:66px;
            }
            input[type=number]::-webkit-inner-spin-button,
             input[type=number]::-webkit-outer-spin-button {
                 -webkit-appearance: none;
                 margin: 0;
            }
            .error-border{
                border:1px solid red;
            }
            .membership-form-col{
                width: 660px;
                flex: none;
                margin: 0 auto;
            }
           .tab-content .row > .col-md-7{
                -ms-flex: 0 0 100%;
                flex: 0 0 100%;
                max-width: 100%;
           }
            .footer_links .container {
                padding-left: 0;
                padding-right: 0;
            }
            .footer-padding {
                padding: 15px;
                letter-spacing: 0px;
            }
            .footer_links li a {
                color: #ffffff !important;
            }
            .footer-List li {
                margin:0;
            }
            .nct-mebmber-logo img{
                padding-left:15px;
            }
            #tabs {
                padding-top: 35px;
            }
            #register {
                padding-top: 20px;
            }
            .nav-tabs li a:after{
                left: 97%;
                top: 1px;
            }
            .nav-tabs li a:before {
                top: -3px;
                left: 97%;
            }
            .nav-tabs li.active a {
                color: #fff !important;
            }
			.nav-tabs li a {
            	margin-bottom:5px;
                padding-top:5px;
                font-size:16px;
            }
            .mrtitle{
                padding:0 10px !important;
            }
			body {
                font-size: 1rem !important;
            }
            html body.sfdcBody{
            	padding: 10px 0px 0 0px;
                font-family: "Lato", sans-serif;
                color: #080808;
            }
			.link-color{
                color: rgb(56, 179, 33) !important;
            }
            .link-color:hover{
                color: green;
                text-decoration:none;
                cursor: pointer;
            }
			.gift-aid-select-box{
                min-width: 200px;
                height: 38px;
                padding: 0 10px;
                border: 1px solid #ccc;
                background-color: rgb(244, 244, 244);
                font-style: initial;
                border-width: 1px;
                border-style: solid;
                border-color: rgb(238, 238, 238);
                border-radius: 20px;
                margin-bottom: 20px;
            }
            .gender-title-select {
                display: inline-block;
                padding: 0 !important;
            }
            .gender-title-select select {
                height: 38px;
                border: none;
                background-color: transparent;
                padding: 0 10px;
            }
			.dynmaic-radio-fields td input[type="radio"] {
            	opacity:1;
                margin-right: 6px;
            }
			.dynmaic-radio-fields td{
                border:none !important;
            }
			.newprivacy-content{
                color:#080808;
                padding-top:20px;
                text-align: center;
			}
			.newprivacy-content input{
            	opacity:1 !important;
            }
			.newprivacy-content .radio-fields-row{
                color:#080808;
            }
			.newprivacy-content .privacy-statement{
                padding: 0;
                background-color: transparent;
                color: #080808;
                padding-top: 15px;
    		}
			.newprivacy-content .container{
                padding:0;
            }
			.newprivacy-content .privacy-statement .underlink {
                color: #35a535;
                font-size: 15px;
            }
			.newprivacy-content .radio-fields-col td{
                border:none !important;
            }
			.newprivacy-content .radio-fields-col table {
                margin: 0 auto;
            }
			.newprivacy-content .radio-fields-col span {
                display:block
            }
			@media(max-width:767px) {
            	.nav-tabs{
                    display: flex;
    				justify-content: space-between;
                }
                .nav-tabs li{
                	width: 48%;
    				margin-bottom: 10px !important
                }
                .nav-tabs > li:last-child a, .nav-tabs > li:first-child a {
                    border-top-right-radius: 0;
                    border-bottom-right-radius: 0;
                    border-top-left-radius: 0;
                    border-bottom-left-radius: 0;
                }
                .nav-tabs li a{
                    width:100%;
                    padding: 5px 10px 5px 15px;
                }
                .nav-tabs li a:before, .nav-tabs li a:after{
                    display:none;
                }
                .custom_select {
                    width: 100%;
                }
                #pcfirst > .row > div {
            		-ms-flex: 0 0 100%;
                    flex: 0 0 100%;
                    max-width: 100%;
            	}
				#postcode_checker{
                	margin-bottom: 20px;
				}
                .checkbox-span {
                    position: relative;
                    left: 15px;
                }
				#scd1, #scd2, #scd3 {
                    width: 55px;
                }
                .row {
                	margin:0;
                }
				.membership-form-col,.tab-content .row > .col-md-7, .tab-content .row > div{
                    padding:0;
				}
				.footer_links li{
                    display:block;
                }
                .footer-padding {
                    padding: 15px 0;
                }
				.ddguaranteeblock ul{
                    margin-left:0 !important;
                }
				.radio-fields-col.membership_check{
                	padding-left:0;
                }
            }
	    .acquition{width:50%}
	    .membershipsource select , .acquition select{
		width:100%;
	    }
             #MembershipalertModal .modal-header ,#MembershipalertModal .modal-footer {
				border:none;
			}
            .modal_close{
            	background-color:white !important;
                background-image:none;
                color:#008669;
            }
            .contact_check{
                padding-top:10px;
            }
            .contact_check span{
                	display:inline !important;
                    padding:0px 10px;
                }
            .membership-line{
                width: 100%;
                left: 0px;
            }
            . membership-form-col{
                text-align:justify;
            }
        </style>
    </head>

<body class="membership-details-screen">
    <section>
    <apex:input value="{!onComplete}" id="onComplete" style="opacity:0;width:1px;height:1px;"/>
    	<input type="text" value="{!membershipDetails.staffMember}" id="checkStaff" style="opacity:0;width:1px;height:1px;"/>
        <input type="text" value="{!booleanChecking.isCompanionContactExisting}" id="staffSecondContact" style="opacity:0;width:1px;height:1px;"/>
        <div class="green-bg-image">
            <div class="text-center nct-mebmber-logo"><apex:image url="{!URLFOR($Resource.nctapp, 'nct-app/assets/nctmembers-logo.png')}"/></div>
        </div>
        <div class="membership-details container">
            <div class="row">
                <div class="col-12 membership-form-col">
                    <div id="tabs">
                            <ul class="nav nav-tabs">
                                <li id="register_li" class="active">
                                    <a data-toggle="tab">1. Register</a>
                                </li>
                                <li id="payment_li">
                                    <a data-toggle="tab"> 2. Payment</a>
                                </li>
                                <li id="gift_li">
                                    <a data-toggle="tab"> 3. Gift Aid</a>
                                </li>
                                <li id="confirmation_li">
                                    <a data-toggle="tab">4. Confirmation</a>
                                </li>
                                <li id="thankyou_li">
                                    <a data-toggle="tab">5. Thank You</a>
                                </li>
                            </ul>
                        <form id="form1">
                            <div class="tab-content">
                                <div id="register" class="tab-pane fade in active show">
                                    <div class="row">
                                        <div class="col-md-7">
                                            <h3>Membership details</h3>
                                            <p>Membership covers up to two people at one address.</p>
                                            <p>Please confirm the personal details for the membership below.</p>
                                            <!-- Membership person details start here-->
                                            <div class="membership-line"></div>
                                            <div class="membership-person-details">
                                                <h5>Person One</h5>
                                                <div class="light-orange-color required-fields-text">*Required fields
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-2">
                                                        <div><label><sup class="light-orange-color">*</sup>Title</label></div>
                                                        <span style="text-color:white;" class="form-fields first-person-title membership-fields gender-title-select mrtitle">
                                                            
                                                       <apex:selectList id="salutation" value="{!Contact.salutation}" multiselect="false" size="1">
                                                                <apex:selectOptions value="{!contactVo.salutationOptions}" />
                                                          	</apex:selectList>
                                                        </span>

                                                    </div>
                                                    <div class="col-md-5">
                                                        <div><label><sup class="light-orange-color">*</sup>First Name</label></div>
                                                            <input id='textForename' name='textForename' value="{!contact.firstname}" type="text" class="form-fields membership-fields"
                                                            placeholder="First Name" />
                                                    </div>
                                                    <div class="col-md-5">
                                                        <div><label><sup class="light-orange-color">*</sup>Last Name</label></div>
                                                            <input type="text" id='textSurname' name='textSurname' value="{!contact.lastname}" class="form-fields membership-fields"
                                                            placeholder="Last Name" />
                                                    </div>
                                                </div>
                                                <div class="row paddingbot10px errorMessage errormessage">
                                                  <!-- <p class="gender-error error-message hide">Please select gender </p> -->
                                                    <div class="col-md-3"><label><sup class="light-orange-color">*</sup>Your
                                                            Gender</label></div>
                                                	<span class="dynmaic-radio-fields first-person-gender">
                                                	<apex:selectRadio id="gender" value="{!contact.Gender__c}">
                                                                <apex:selectOptions value="{!contactVo.genderOptions}" />
                                                     </apex:selectRadio>
                                                	</span>


                                                </div>
                                                <div class="row">
                                                    <div class="col-md-12 col-12">
                                                        <div><label><sup class="light-orange-color">*</sup>Email Address</label></div>
                                                            <input type="email" name='textEmail' id='textEmail' value="{!contact.email}" class="form-fields membership-fields"
                                                            placeholder="Email address" />
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-12 col-12">
                                                        <div><label><sup class="light-orange-color">*</sup>Phone Number</label></div>
                                                            <input type="text" id='textMobile' name='textMobile' value="{!contact.phone}" class="form-fields membership-fields"
                                                            placeholder="Phone number" />
                                                    </div>
                                                </div>
                                                <div class="col-12 radio-fields-col membership_check paddingbot20px">
                                                    <span>
                                                        <input type="checkbox" name="contact" id="twomem" value="{!booleanChecking.twomems}"/>
                                                        <!--<input type="hidden" id="hdn" value="{!membership.twomems}" />
                                                            <apex:actionsupport event="onclick">
                                                            <apex:param value="{!membership.twomem}" assignTo="{!isChecked}"/>
                                                            </apex:actionSupport>-->
                                                        NCT membership covers up to two people at the same address. If
                                                        you'd like a joint membership, please tick this box.
                                                    </span>
                                                </div>

                                                <!-- Membership person 2 details start here-->
                                                <div class="membership-person-details padding-top" id="secondMembership">
                                                    <h5>
                                                        Person Two
                                                        <a class="clear text-light-green" id="person-clear">(Clear)</a>
                                                    </h5>
                                                    <div class="light-orange-color required-fields-text">*Required
                                                        fields </div>
                                                    <div class="row">
                                                        <div class="col-md-2">
                                                            <div><label><sup class="light-orange-color">*</sup>Title</label></div>
                                                            <span style="text-color:white;" class="form-fields membership-fields gender-title-select mrtitle">
                                                            <apex:selectList id="ssalutation" value="{!secondContact.salutationSecondary}" multiselect="false" size="1">
                                                                <apex:selectOptions value="{!contactVo.salutationOptions}" />

                                                          	</apex:selectList></span>
                                                            <!--<select class="form-fields membership-fields">
                                                                <option>Mrs</option>
                                                                <option>Mr</option>
                                                            </select>-->
                                                        </div>
                                                        <div class="col-md-5">
                                                            <div><label><sup class="light-orange-color">*</sup>First
                                                                    Name</label></div>
                                                            <input id='textForenamePartner' name='textForenamePartner' value="{!secondContact.secondContactFirstName}" type="text"  class="form-fields membership-fields"
                                                                placeholder="First Name" />
                                                        </div>
                                                        <div class="col-md-5">
                                                            <div><label><sup class="light-orange-color">*</sup>Last
                                                                    Name</label></div>
                                                            <input type="text" id='textSurnamePartner' name='textSurnamePartner' value="{!secondContact.secondContactLastName}" class="form-fields membership-fields"
                                                                placeholder="Last Name" />
                                                        </div>
                                                    </div>
                                                    <div class="row paddingbot10px errorMessage errormessage">
                                                      <!-- <p class="gender-error error-message hide">Please select gender </p> -->
                                                        <div class="col-md-3"><label><sup class="light-orange-color">*</sup>Your
                                                                Gender</label></div>
                                                        <span class="dynmaic-radio-fields">
                                                        <apex:selectRadio id="secondContactGender" value="{!secondContact.secondContactGenders}">
                                                                    <apex:selectOptions value="{!contactVo.genderOptions}" />
                                                         </apex:selectRadio>
                                                        </span>


                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-12 col-12">
                                                            <div><label><sup class="light-orange-color">*</sup>Email
                                                                    Address</label></div>
                                                            <input type="email" id='textEmailPartner' name='textEmailPartner' value="{!secondContact.secondContactEmail}" class="form-fields membership-fields"
                                                                placeholder="Email address" />
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-12 col-12">
                                                            <div><label><sup class="light-orange-color">*</sup>Phone
                                                                    Number</label></div>
                                                            <input type="text" name='textTelephoneHomePartner' value="{!secondContact.secondContactPhone}" id='textTelephoneHomePartner' class="form-fields membership-fields"
                                                                placeholder="Phone number" />
                                                        </div>
                                                    </div>

                                                </div>
                                                <!-- Membership person2 details end here -->
                                                <div class="row">
                                                    <div class="col-12"><label><sup class="light-orange-color">*</sup>Postcode</label></div>
                                                    <div class="col-md-8 col-12">
                                                        <input type="text" class="form-fields membership-fields" placeholder="Postcode" id ="postcode" value="{!contact.MailingPostalCode}" />
                                                    </div>
                                                    <div class="col-md-4 col-12">
                                                        <button type="button" class="green-button nomargin form-fields" id="postcode_checker">Find  address</button>
                                                    </div>
                                                </div>
                                                <span class="memberexist" style="opacity:0">
                                                	<apex:input value="{!booleanChecking.isMembershipExists}" id="isMembershipExists"/>
                                                 </span>
                                                <div class="row">
                                                    <div class="col-md-12 col-12">
                                                        <div><label><sup class="light-orange-color">*</sup>Source</label></div>
                                                            <span style="text-color:white;width:100%;" class="form-fields membership-fields gender-title-select membershipsource custom_select">
                                                              <apex:selectList id="membershipSource" value="{!membershipDetails.membershipSource}" multiselect="false" size="1">
                                                                <apex:selectOptions value="{!membershipDetails.membershipSourceOptions}" />
                                                                
                                                          </apex:selectList></span>
                                                    </div>
                                                </div>  
                                            </div>

                                            <!-- Membership person  details end here-->
                                            <div class="membership-line"></div>

                                            <!-- after postcode auto generate fields -->
                                            <div id='pcfirst' class="padding-top">
                                                    <div class="row paddingbot20px">
                                                        <div class="col-5"><label class="text-center font-bold"><sup class="light-orange-color">*</sup>Building :</label></div>
                                                        <div class="col-7">
                                                            <select name='building' id='building' class="custom_select"><option>Check postcode above and click "Find"</option></select>
                                                        </div>
                                                    </div>

                                                    <div class="row">
                                                        <div class="col-5"><label class="text-center font-bold"><sup class="light-orange-color">*</sup>Home address:</label></div>
                                                        <div class="col-7">
                                                            <input type="text" class="form-fields membership-fields" name="textAddress1" id="address_line_1" size="60" maxlength="35" value="{!contact.MailingStreet}"  placeholder="address line" required="true" />
                                                            <input type="text" class="form-fields membership-fields" id="textAddress2" name="textAddress2" size="60" maxlength="35" value="" placeholder="address line2"  />
                                                            <input type="text" class="form-fields membership-fields"  id='textAddress3' name='textAddress3' size='60' maxlength='35' value=''  placeholder="address line3"  />
                                                        </div>
                                                    </div>

                                                    <div class="row">
                                                            <div class="col-5"> <label class="text-center font-bold"><sup class="light-orange-color">*</sup>Town:</label> </div>
                                                            <div class="col-7">
                                                                <input type="text" class="form-fields membership-fields" name='textTown' id='town' size='35' maxlength='35' value='{!contact.MailingCity}' placeholder="Town" required="true" />
                                                            </div>
                                                    </div>
                                                    <div class="row">
                                                            <div class="col-5"> <label class="text-center font-bold">County:</label> </div>
                                                            <div class="col-7">
                                                                <input type="text" class="form-fields membership-fields"  name='textCounty' id='county' size='35' maxlength='35' value='{!contact.MailingState}'  placeholder="County"  />
                                                            </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-5"><label class="text-center font-bold">Due/birth date:</label></div>
                                                        <div class="col-7">
                                                                    <!--<apex:input type="date" value="{!eDate}"  styleClass="custom_select" id="due-Date" required="true"/>  -->
                                                                    <input type="date" value="{!contactVo.eDate}" class="custom_select" id="due-Date" />
                                                                    <span style='color:#999999; font-size:10px'>Please enter the date of birth of your youngest child, or if you are expecting, your estimated due date.
                                                                            This information is optional, but it will help us tailor the information we provide to you.</span>
                                                        </div>
                                                    </div>
                                                    <div class="row">

                                                            <div class="col-5"> <label class="text-center font-bold"><sup class="light-orange-color">*</sup>NCT Branch:</label> </div>
                                                            <div class="col-7">
                                                                 <apex:outputPanel id="branch_Picklist">
                                                                 <select name='branch' id='selectBranch' class="custom_select" >
                                                                       <apex:repeat value="{!membershipDetails.nearestBranchs}" var="branchKey">
                                                                        <option value="{!membershipDetails.nearestBranchs}" >{!branchKey}</option>


                                                                        <option value="" disabled="true">------------------------</option>

                                                                       <apex:repeat value="{!membershipDetails.nearestBranchs[branchKey]}" var="branchKey1" >
                                                                        <option value="{!branchKey1.Id}">{!branchKey1.Name}</option>
                                                                        </apex:repeat>
                                                                        </apex:repeat>
                                                                       <!--<option value="" disabled="true">Nearest Branches</option>
                                                                       <option value="" disabled="true">------------------------</option>
                                                                       <apex:repeat value="{!membership.nearestBranchs}" var="nb">
                                                                            <option value="{!nb.id}">{!nb.Name}</option>
                                                                       </apex:repeat>
                                                                       <option value="" disabled="true">------------------------</option>
                                                                       <option value="" disabled="true">Alphabetical list below:</option>
                                                                       <option value="" disabled="true">------------------------</option>
                                                                       <apex:repeat value="{!membership.branchs}" var="b">
                                                                            <option value="{!b.id}">{!b.Name}</option>
                                                                       </apex:repeat>-->
                                                                 </select>
                                                                 </apex:outputPanel>
                                                            </div>

                                                    </div>
                                            </div>
                                            <!-- newprivacy content start here -->
                                              <div class="newprivacy-content">
                                                
                                                <!-- privacy statement start here -->
                                                <div class="privacy-statement">
                                                    <div class="container">
                                                        <div class="privacy-statement-title">
                                                          Privacy statement
                                                        </div>
                                                       <div class="row radio-fields-row">
                                                         <p>As part of your membership we’ll be in touch to keep you up-to-date with member news and benefits, 
                                                            by email and post.  </p>
                                                         <p>We’d also like to keep in touch with you about our services, support and family events,
                                                           plus how you can support our important work. We’ll only contact you in the ways you want, 
                                                             and we’ll keep your information safe. Check out our Privacy policy <a style="text-decoration:underline;" href="https://www.nct.org.uk/privacy" target="_blank">(www.nct.org.uk/privacy)</a> for more details.</p>                                                     
                                                         <div>Would you like to hear from us by</div>                                                   
                                                         <div class="col-12 radio-fields-col">
                                                           <!--<span style="text-color:white;"><apex:selectCheckboxes value="{!contactSelectedPreferences}">
                                                                    <apex:selectOptions value="{!contactPreferenceOptions}" />
                                                          </apex:selectCheckboxes></span>-->
                                                          <div class="contact_check">
                                                             <span><apex:inputCheckbox id="emailOpt" label="emailOpt" value="{!contact.HasOptedOutOfEmail}"/>Email</span> 
                                                             <span><apex:inputCheckbox id="smsOpt" label="smsOpt" value="{!contact.SMS_Opt_In__c}"/>Text</span>
                                                             <span><apex:inputCheckbox id="postOpt" label="postOpt" value="{!contact.Post_Opt_In__c}"/>Post</span>
                                                             <span><apex:inputCheckbox id="doNotCallOpt" label="doNotCallOpt" value="{!contact.DoNotCall}"/>Telephone</span>
                                                          </div>
                                                            <style>
                                                              .contact_check span {
                                                                 display: block !important;
                                                                 padding: 0px 15px 10px 0;
                                                              }
                                                              .newprivacy-content .privacy-statement {
                                                            	text-align: justify;
                                                              }
                                                              .privacy-statement-title{
                                                                text-align: center;
                                                            	padding-bottom: 15px;
                                                              }
                                                              .radio-fields-col,.agree-statement-row{
                                                                padding-left:0;
                                                              }
                                                            </style>
                                                          <div style="padding-bottom:15px;">You can change your mind at any time through our online preference centre or by contacting us on 0300 330 0700.</div>
                                                          <div class="agree-statement-row">
                                                            <input id="agree" type="checkbox" /> I have read and understand/agree with our websites Terms and Conditions.
                                                          </div>  
                                                        </div>
                                                      </div>
                                                      
                                                  </div>
                                                  </div>
                                                  <!-- privacy statement end here -->
                                              </div>
                                            <!-- newprivacy content end here -->
                                            <!-- auto generate fields  -->
                                            <div class="row padding-top justify-content-center">
                                                <div class=" col-lg-offset-4 col-md-5 col-12">
                                                    <button type="button" id="nameSubmit" name="nameSubmit" class="green-button nomargin form-fields" >Confirm Membership details</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div id="payment" class="tab-pane fade">
                                    <apex:outputPanel id="paymentMembership">
                                    <div class="row">
                                        <div class="col-md-7">
                                        <div id="pay_page">
                                            <legend>
                                                <label>Membership Type</label>
                                            </legend>

                                            <div class="pure-control-group" id="selectMembership">


                                                <p><b>What type of membership would you like?</b><br /><br />
                                                <apex:outputPanel id="selMembership">
                                                <span id="membershiptype-loader" class="show-loader">
                                                  Please wait <apex:image url="{!URLFOR($Resource.nctapp, 'nct-app/assets/loader.gif')}"/>
                                                </span>
                                                <span id="membershiptype" style="width:1px;height:1px;display:none;">{!membershipDetails.membershipTypeMap}</span>
                                                <select style="margin-bottom:0;" name="selectMembership" id="selectMembership" class="form-fields membership-fields">
                                                    <option SELECTED="true" value="">Please select</option>
                                                    <apex:repeat value="{!membershipDetails.membershipTypeMap}" var="typeKey">
                                                        <option value="{!membershipDetails.membershipTypeMap}" style='font-weight:bold; background:#abcb63;' disabled="true">{!typeKey}</option>
                                                        <apex:repeat value="{!membershipDetails.membershipTypeMap[typeKey]}" var="mbrshpFee">
                                                            <option value="{!mbrshpFee.Id}">&nbsp; &nbsp; &nbsp; &nbsp;{!mbrshpFee.Payment_Type__c}</option>
                                                        </apex:repeat>
                                                    </apex:repeat>
                                                </select>
                                                </apex:outputPanel>
                                                <div id="reduced" style="display:none">
                                                    <strong>You are eligible for this if you receive Employment Support Allowance or tax credits (excluding child tax credits alone).</strong>
                                                </div>
                                                </p>
                                            </div>
                                            <div class="pure-control-group" id="giftaid" style="clear:both;">
                                                <style>td {padding:5px; border:1px dotted #aaa;}</style>
                                                <div class='giftaidblock' style='border:1px solid #333; padding:10px;'>
                                               <!-- @1    <apex:image url="{!URLFOR($Resource.nctapp, 'nct-app/assets/gift_aid.jpg')}"/>  -->
                                                    <!--<img src='assets/gift_aid.jpg' width='140' height='49' title='Gift Aid' align='right'/>-->
                                                        <b> <h2> Would you like to add Gift Aid? </h2> </b>
                                                    Ticking the optional Gift Aid box means NCT can get the most of your membership donation at no extra cost to you.
                                                    This means that for every &pound;1 you give, we will receive an extra 25p from HM Revenue and Customs<br />
                                                    <br style='clear:both;' />
                                                    <p>
                                                        <strong style='padding-top:10px;'>Your Gift Aid declaration</strong><br />
                                                    </p>
                                                    <br style='clear:both;' />
                                                    <p>
                                                    <div class="col-12">
                                                       <label class="font-bold">Gift Aid Acquistion Method: </label>
                                                       <select class="gift-aid-select-box">
                                                           <option>Verbal</option>
                                                           <option>Written</option>
                                                           <option>Digital</option>
                                                       </select>
                                                    </div>
                                                    <div class="col-12 radio-fields-col membership_check paddingbot20px">
                                                        <span><input type='checkbox' name='checkboxGiftAidPerson1' style='float:left' />
                                                    I agree to the NCT claiming tax under the Gift Aid scheme on all my donations and subscriptions until I advise otherwise. I confirm that I am paying an
                                                                    amount of UK Income and/or Capital Gains Tax which is at least equal to the amount of tax that all Charities and Community Amateur Sports Clubs (CASCs)
                                                                    will reclaim on my donation in each tax year (6 April one year to 5 April the next).</span>

                                                        <br style='clear:both;' />
                                                    </div></p>
                                                    <p style='font-size:11px; line-height: 13px;'>

                                                            Please note: we will claim back the tax on any donations or membership subscriptions you have given us in the last 4 tax years. If you want to nominate another date,
                                                            e.g. because you have been a non-taxpayer for some of the last four years or if you want to cancel this declaration, change your home address or no longer pay
                                                            sufficient tax on your income, please contact our enquiries team at enquiries@nct.org.uk

                                                    </p>
                                                </div>

                                            </div>
                                                <div class="pure-control-group">
                                            <p>If you have any questions about your membership type, please email us at <a href="mailto:enquiries@nct.org.uk">enquiries@nct.org.uk</a>
                                                <br />or telephone 0300 330 0700 and choose option 4.</p>
                                            <!-- <p>You can speak to our Enquiries Agents Monday, Wednesday, Thursday, Friday 9-7pm and Tuesday 9-6pm.</p> -->

                                            <p>You can speak to our Enquiries Agents on Monday to Friday from 9am to 7pm and Tuesday from 9am to 6pm.</p>

                                            <p>We're closed on bank holidays.</p>
                                            </div>

                                            <div class="pure-control-group">
                                            </div>
                                            <!-- 11/27/2018 changes start here -->
                                                <div class="row nomargin">
                                                    <div class="col-md-9 col-6"><button id="pay_now_back" class="back-btn">
                                                            <i class="fa fa-chevron-left" aria-hidden="true"></i>
                                                    </button></div>
                                                    <button class="green-button form-fields col-md-3 col-6" id="Pay_now">Sign Up</button>
                                                </div>
                                             <!-- 11/27/2018 changes end here -->
                                        </div>
                                        </div>
                                        <div class="col-md-1 col-12"></div>
                                        <div class="col-md-7">
                                            <div id="direct_debit_block">
                                            <fieldset>
                                            <legend id="confpay">
                                                Confirm Details and Payment Type&nbsp;&gt; Direct Debit Details
                                            </legend>
                                                    <fieldset>
                                                        <div class="pure-control-group">

                                                                <label for="forename">Your name:&nbsp; </label>
                                                                <apex:outputText Id="nameDisplay" value=" {!contact.firstname} {!contact.lastname}" style="font-weight:bold;"></apex:outputText>
                                                                <strong><font id="forename_Dsp"> </font></strong>

                                                            </div>
                                                        <div class="pure-control-group" id="membershipSelection">
                                                            <label for="surname">Membership type:&nbsp;  </label>
                                                             <apex:outputText Id="membershipTypeInfo" value=" {!membershipDetails.membershipInfo.Contact_Type__c} {!membershipDetails.membershipInfo.Membership__c}" style="font-weight:bold;"></apex:outputText>
                                                            <strong><span id="forename_Details"> </span></strong>
                                                        </div>
                                                        <p>&nbsp;</p>

                                                        <input type="hidden" name="account_type" value="existing" />

                                                        </fieldset>

                                                        <fieldset>
                                                            <div class="pure-control-group ddinstr">
                                                                In order to set up your Direct Debit Instructions online you will need to provide your bank sort code and account number.   If you are not the account holder or bank account requires more than one signatory then please
                                                                ask our Enquiries team to send you a paper Direct Debit Instruction or <a style="color:blue;cursor:pointer"  id="pay_now_again"  title="Click here"><b>Click Here</b></a>
                                                                 to go back to choose the Membership with Card Payment.
                                                            </div>

                                                        <div class="pure-control-group">
                                                            <label class="text-center font-bold"><sup class="light-orange-color">*</sup>Account name:</label>
                                                            <span id="userData">
                                                                <input id="accountName" class="form-fields membership-fields" type="text" value=""  name="accountName"/>
                                                            </span>
                                                        </div>


                                                        <div class="pure-control-group">
                                                            <label class="text-center font-bold"><sup class="light-orange-color">*</sup>Sort code:</label>
                                                            <span id="userData">
                                                                <input id="scd1" class="form-fields-short membership-fields scd" type="text" name="scd1" maxlength="2" size="2" value="" />&nbsp;-&nbsp;
                                                                <input id="scd2" class="form-fields-short membership-fields scd" type="text" name="scd2" maxlength="2" size="2" value=""  />&nbsp;-&nbsp;
                                                                <input id="scd3" class="form-fields-short membership-fields scd" type="text" name="scd3" maxlength="2" size="2" value=""  />
                                                            </span>
                                                        </div>

                                                        <div class="pure-control-group">
                                                            <label class="text-center font-bold"><sup class="light-orange-color">*</sup>Account number:</label>
                                                            <input id="accountNumber" class="form-fields membership-fields" type="" name="accountNumber" maxlength="8" size="8" value="" />
                                                        </div>


                                                        <div class="pure-control-group">
                                                            <label class="text-center font-bold"><sup class="light-orange-color">*</sup>Payment date:</label>
                                                            <input class="form-fields membership-fields" type="hidden" SELECTED="true" CHECKED="true" name="paymentDate" value="3rd" onChange="" />&nbsp;<span id="payment-date"></span>&nbsp;&nbsp;
                                                        </div>
                                                        <p></p>
                                                         <div class="pure-control-group">
                                                         <p>
                                                            <strong>Your bank account will be debited as follows:</strong>
                                                        </p>
                                                        </div>

                                                        <div class="pure-control-group paydates"><p>
                                                                <span><span id='dateprocess1'><strong>&pound;<apex:outputText Id="membershipFeeInfo" value=" {!membershipDetails.membershipInfo.Installment_Amount__c}"/><span id="pay_money"> </span></strong>
                                                        on or after 3rd of the month <span class="eighteen-months-membership">and quarterly thereafter</span>.
                                                        </span></span>
                                                            <br /></p>
                                                        </div>



                                                    <div class="pure-control-group confpay">
                                                    <div class="col-12 radio-fields-col membership_check paddingbot20px">
                                                        <p><span>
                                                                <input type="checkbox" style="visibility:hidden" required="true" />
                                                                <input type="checkbox" id="checkboxConfirm" name="checkboxConfirm"/>

                                                            <i>I confirm that I am authorised to debit from this account. I agree to NCT debiting my account as detailed above.
                                                            </i><br /></span></p>
                                                            <div class="checkbox-error error-message hide">Please Tick the Agree to Terms of Use</div>
                                                    </div>

                                                <div class='ddguaranteeblock' style='border:1px solid #333; padding:10px;'>
                                                    <h3>The Direct Debit Guarantee</h3>
                                                    <img src='https://www.nct.org.uk/membership-form/extras/dd_logo.gif' align='right' style='padding:8px;'/>
                                                    <ul style='list-style:disc; margin-left:20px;'>
                                                        <li style='list-style:disc;'>This Guarantee is offered by all banks and building societies that accept instructions to pay Direct Debits.</li>
                                                        <li style='list-style:disc;'>If there are any changes to the amount, date or frequency of your Direct Debit NCT will notify you 10 working days in advance of your account being debited or as otherwise agreed. If you request NCT to collect a payment, confirmation of the amount and date will be given to you at the time of the request.</li>
                                                        <li style='list-style:disc;'>If an error is made in the payment of your Direct Debit, by NCT or your bank or building society, you are entitled to a full and immediate refund of the amount paid from your bank or building society.</li>
                                                        <li style='list-style:disc;'>If you receive a refund you are not entitled to, you must pay it back when NCT asks you to.</li>
                                                        <li style='list-style:disc;'>You can cancel a Direct Debit at any time by simply contacting your bank or building society. Written confirmation may be required. Please also notify us.</li>
                                                    </ul>

                                                </div>

                                                        <br />
                                                        <p>
                                                            Instructions to your bank or building society to pay by Direct Debit.<br />
                                                        </p>
                                                    </div>
                                            <div class="pure-control-group" style="clear:both;">

                                            <style>td {padding:5px; border:1px dotted #aaa;}</style>
                                                <!-- <div class='giftaidblock' style='border:1px solid #333; padding:10px;'>
                                                    <img src='assets/gift_aid.jpg' width='140' height='49' title='Gift Aid' align='right'/>
                                                    Ticking the optional Gift Aid box means NCT can get the most of your membership donation at no extra cost to you.
                                                    This means that for every &pound;1 you give, we will receive an extra 25p from HM Revenue and Customs<br />
                                                    <p>
                                                        <strong>Your Gift Aid declaration</strong><br />
                                                    </p>
                                                    <div class="col-12">
                                                       <label class="font-bold">Gift Aid Acquistion Method: </label>
                                                       <select class="gift-aid-select-box">
                                                           <option>Verbal</option>
                                                           <option>Written</option>
                                                           <option>Digital</option>
                                                       </select>
                                                    </div>
                                                    <div class="col-12 radio-fields-col membership_check paddingbot20px">
                                                    <p>
                                                        <span><input type='checkbox' Id="giftAidCheckbox" name='checkboxGiftAidPerson1' style='float:left' />
                                                    I agree to the NCT claiming tax under the Gift Aid scheme on all my donations and subscriptions until I advise otherwise. I confirm that I am paying an
                                                                    amount of UK Income and/or Capital Gains Tax which is at least equal to the amount of tax that all Charities and Community Amateur Sports Clubs (CASCs)
                                                                    will reclaim on my donation in each tax year (6 April one year to 5 April the next).</span>
                                                    </p>
                                                    </div>
                                                    <br style='clear:both;' />
                                                    <p style='font-size:11px; line-height: 13px;'>

                                                            Please note: we will claim back the tax on any donations or membership subscriptions you have given us in the last 4 tax years. If you want to nominate another date,
                                                            e.g. because you have been a non-taxpayer for some of the last four years or if you want to cancel this declaration, change your home address or no longer pay
                                                            sufficient tax on your income, please contact our enquiries team at enquiries@nct.org.uk

                                                    </p>
                                                </div>   -->

                                                    </div>
                                                    <div class="pure-control-group">

                                                <div style='border:1px solid #333; padding:10px;'>
                                                    <p>Should you have any queries, please contact us:<br /></p>
                                                        <p><strong>Email:</strong> <a href='mailto:enquiries@nct.org.uk'>enquiries@nct.org.uk</a></p>
                                                        <p><strong>Telephone:</strong> 0300 330 0700</p>
                                                </div>
                                                        </div>
                                                    <div class="pure-control-group">
                                                        <span style='font-size:9px; color:#aaa;'>I wish to become a member of the National Childbirth Trust (a company limited by guarantee).
                                            I undertake that if, while I am a member or for one year thereafter, the company shall be wound up, I will contribute to the assets of the company (in accordance with Clause 8 of its Memorandum)
                                            such sum as may be required not exceeding &pound;1.</span>          </div>

                                                    <div class="pure-control-group">
                                                        If you'd like a different membership payment method, please Go Back to select a different type.<br /><br />
                                                    </div>


                                            </fieldset>
                                            <!-- 11/27/2018 changes start here -->
                                            <div class="row nomargin paddingtop20px">
                                                <div class="col-md-9 col-6">
                                                    <button id="direct_pay_back" class="back-btn">
                                                        <i class="fa fa-chevron-left" aria-hidden="true"></i>
                                                    </button>
                                                </div>
                                                <button class="green-button form-fields col-md-3 col-6" id="direct_pay_btn">Pay Now</button>
                                            </div>
                                            <!-- 11/27/2018 changes end here -->

                                        </fieldset>
                                        </div>
                                        <!-- 11/27/2018 changes start here -->
                                        <div id="gift_aid_block" >
                                               <div class='giftaidblock' style='border:1px solid #333; padding:10px;'>
                                            <!-- @2 -->    <!--     <apex:image url="{!URLFOR($Resource.nctapp, 'nct-app/assets/gift_aid.jpg')}"/>
                                                    <!--<img src='assets/gift_aid.jpg' width='140' height='49' title='Gift Aid' align='right' /> -->
                                                        <b> <h2> Would you like to add Gift Aid? </h2> </b>
                                                    Ticking the optional Gift Aid box means NCT can get the most of your membership donation at no extra
                                                    cost to you.
                                                    This means that for every &pound;1 you give, we will receive an extra 25p from HM Revenue and Customs<br />
                                                    <p>
                                                        <strong>Your Gift Aid declaration</strong><br/>
                                                    </p>
													<div class="col-12">
                                                       <label class="font-bold">Gift Aid Acquistion Method: </label>
<span class="gift-aid-select-box form-fields membership-fields gender-title-select acquition">
                                                           <apex:selectList id="acquistion" value="{!contactVo.acquistion}" multiselect="false" size="1">
                                                           <apex:selectOptions value="{!contactVo.acquistionOptions}" />
                                                       </apex:selectList></span>
                                                      <!-- <select class="gift-aid-select-box">
                                                           <option>Verbal</option>
                                                           <option>Written</option>
                                                           <option>Digital</option>
                                                       </select> -->
                                                    </div>
                                                    <div class="col-12 radio-fields-col paddingbot20px membership_check">
                                                        <p>
                                                        <span><input type='checkbox' id='giftAidCheckbox' name='checkboxGiftAidPerson1' style='float:left' />
                                                                I agree to the NCT claiming tax under the Gift Aid scheme on all my donations and subscriptions
                                                                until I advise otherwise. I confirm that I am paying an
                                                                amount of UK Income and/or Capital Gains Tax which is at least equal to the amount of tax that all
                                                                Charities and Community Amateur Sports Clubs (CASCs)
                                                                will reclaim on my donation in each tax year (6 April one year to 5 April the next).</span>
                                                        </p>
                                                    </div>
                                                    <br style='clear:both;'/>
                                                    <p style='font-size:11px; line-height: 13px;'>

                                                        Please note: we will claim back the tax on any donations or membership subscriptions you have given us
                                                        in the last 4 tax years. If you want to nominate another date,
                                                        e.g. because you have been a non-taxpayer for some of the last four years or if you want to cancel
                                                        this declaration, change your home address or no longer pay
                                                        sufficient tax on your income, please contact our enquiries team at enquiries@nct.org.uk

                                                    </p>
                                                </div>
                                                <div class="row nomargin paddingtop20px">
                                                    <div class="col-md-9 col-6">
                                                        <button id="gift_aid_back" class="back-btn">
                                                            <i class="fa fa-chevron-left" aria-hidden="true"></i>
                                                        </button>
                                                    </div>
                                                    <button class="green-button form-fields col-md-3 col-6" id="gift_aid_btn">Pay Now</button>
                                                </div>
                                            </div>
                                            <!-- 11/27/2018 changes start here -->
                                        </div>
                                        </div>
                                    </apex:outputpanel>
                                </div>
                                <div id="confirmation" class="tab-pane fade">
                                    <div class="row">
                                        <div class="col-md-7" id="credit_card_confirm">
                                        <fieldset>
                                            <legend>
                                                <label>Confirm Details and Payment Type</label>
                                            </legend>
                                            <div class="pure-control-group">

                                                <p>
                                                    <label class="sc4">Membership type:</label>
                                                    <span id="forename_Cc" /><strong> </strong>
                                                </p>
                                                <p>
                                                    <label class="sc4">Total cost:</label>
                                                    <strong><span>&pound;<span id="pay_money_cc">57</span></span></strong>
                                                </p>
                                            </div>
                                            <p style="clear:left;"><strong>Note:</strong> You will be redirected to Sagepay's secure server to process your payment.</p>
                                            <div class="pure-control-group">
                                                <p><span style='font-size:9px; color:#aaa;'>I wish to become a member of the National Childbirth Trust (a company limited by guarantee).
                                        I undertake that if, while I am a member or for one year thereafter, the company shall be wound up, I will contribute to the assets of the company (in accordance with Clause 8 of its Memorandum)
                                        such sum as may be required not exceeding &pound;1.</span></p>
                                            </div>



                                            <p>If you'd like a different membership payment method, please <a href="#">Go Back</a> to select a different type.</p>


                                            <br /><br />
                                            <div class="pure-control-group">


                                            </div>
                                            </fieldset>
                                            <div class="row nomargin paddingtop20px">
                                                    <!-- 11/27/2018 changes start here -->
                                                    <div class="col-md-9 col-6">
                                                        <button id="confirm_pay_back" class="back-btn">
                                                            <i class="fa fa-chevron-left" aria-hidden="true"></i>
                                                        </button>
                                                    </div>
                                                    <button class="green-button form-fields col-md-3 col-6" id="confirm_all_pay_cc">Pay now</button>
                                                    <!-- 11/27/2018 changes end here -->
                                                </div>
                                        </div>
                                        <div class="col-md-7" id="direct_debit_confirm">
                                        <fieldset>
                                        <legend>Direct Debit Confirmation</legend>

                                        <div class="pure-control-group">
                                        Please check and confirm your Direct Debit Instruction.
                                        </div>

                                        <div class="pure-control-group">
                                        <b>The bank account that will be debited is:</b>
                                        </div>

                                        <div class="pure-control-group">
                                        <label><b>Account name:</b></label>
                                        <font id="DD_acc_name"> </font>
                                        </div>


                                        <div class="pure-control-group">
                                        <label><b>Bank sort code:</b></label>
                                        <font id="DD_sort_code"> </font>
                                        </div>

                                        <div class="pure-control-group">
                                        <label><b>Bank account number:</b></label>
                                        <font id="DD_bank_acc_num"> </font>
                                        </div>

                                        <div class="pure-control-group">
                                        <b>Your bank account will be debited as follows:</b>
                                        </div>

                                        <div class="pure-control-group">
                                                     <!--<td colspan="2"><font id="userData">Eighteen Month by Direct Debit</font>-->

                                        </div>


                                        <div class="pure-control-group">

                                              <font id="userData">
                                                        <strong>&pound;
                                                        <span id="DD_pay_value"><apex:outputText Id="membershipFeeValue" value=" {!membershipDetails.membershipInfo.Installment_Amount__c}"/></span></strong>
                                                        on or after 3rd of the month and quarterly thereafter if quarterly option selected
                                                        .</font>

                                        </div>

                                        <div class="pure-control-group">
                                        Please <a>go back</a> if you'd like to change your membership type.
                                        </div>

                                        </fieldset>
                                        <div class="row nomargin paddingtop20px">
                                            <!-- 11/27/2018 changes start here -->
                                            <div class="col-md-9 col-6">
                                                <button id="direct_debit_back" class="back-btn">
                                                    <i class="fa fa-chevron-left" aria-hidden="true"></i>
                                                </button>
                                            </div>
                                            <button class="green-button form-fields col-md-3 col-6" id="confirm_all_pay_dd">Pay now</button>
                                            <!-- 11/27/2018 changes end here -->
                                        </div>
                                        </div>
                                        </div>
                                </div>
                                <div id="thankyou" class="tab-pane fade">
                                    <div class="row">
                                        <div class="col-md-7 col-12">
                                            <apex:outputPanel Id="displayValues">
                                            <h2 class="paddingtop20px">Congratulations,</h2>
                                            <p><strong><span id="forename_Dsp"> </span></strong></p>
                                            <p><apex:outputText Id="membershipWelcomText" value="Welcome to our family..." rendered="{!booleanChecking.displayMbrNoMessage}"/></p>
                                            <p> <apex:outputText Id="membershipDisplayText" value="Successfully send the Payment link to the Parent !!!" rendered="{!booleanChecking.displaySuccessMessage}"/>
                                                <apex:outputText Id="membershipText" value="Your Membership Number is" rendered="{!booleanChecking.displayMbrNoMessage}"/>&nbsp;
                                                           <span id="membership-loader">
                                                               <apex:image url="{!URLFOR($Resource.nctapp, 'nct-app/assets/loader.gif')}"/>
                                                               </span>
                                               <apex:outputText Id="membershipNumber" value="{!membershipDetails.membershipNumber}" style="font-weight:bold;" rendered="{!booleanChecking.displayMbrNoMessage}"/></p>
                                               </apex:outputPanel>
                                        <div class="col-md-1 col-12">
                                        </div>
                                    </div>
                                </div>
                            </div>
                          </div>
                        </form>

                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- footer start here -->
    <c:Footer />
    <!-- footer end here -->

     <!-- MODAL POPUP START HERE --->
         <div class="container">
  			<div class="modal fade" id="MembershipalertModal" role="dialog">
    			<div class="modal-dialog">
      				<!-- Modal content-->
      				<div class="modal-content">
        				<div class="modal-header">
          					<button type="button" class="close modal_close" data-dismiss="modal">&times;</button>
                        </div>
        				<div class="modal-body"></div>
        				<div class="modal-footer">
          					<button type="button" class="green-button nomargin border-radius" data-dismiss="modal">Close</button>
        				</div>
      				</div>
                    <!--MODAL CONTENT ---->
    			</div>
  			</div>
		</div>
    <!-- MODAL POPUP ENDS HERE ---->

    <apex:includeScript value="{!URLFOR($Resource.nctapp, 'nct-app/js/jquery.min.js')}"/>
    <apex:includeScript value="{!URLFOR($Resource.nctapp, 'nct-app/js/bootstrap.min.js')}"/>
    <apex:includeScript value="{!URLFOR($Resource.nctapp, 'nct-app/js/pca.js')}"/>
    <apex:includeScript value="{!URLFOR($Resource.nctapp, 'nct-app/js/custom-validations.js')}"/>
    <script>
        $(document).ready(function () {
                        $('#selectBranch option').filter(function () { return $(this).html() == ""; }).prop('disabled',true).next().next().prop('selected',true);    
            (function (global) {
                            if(typeof (global) === "undefined")
                            {
                                throw new Error("window is undefined");
                            }
                        
                            var _hash = "/";
                            var noBackPlease = function () {
                                global.location.href += "#";
                        
                                global.setTimeout(function () {
                                    global.location.href += "/";
                                }, 50);
                            };
                            
                            // Earlier we had setInerval here....
                            global.onhashchange = function () {
                                if (global.location.hash !== _hash) {
                                    global.location.hash = _hash;
                                }
                            };
                        
                            global.onload = function () {
                                
                                noBackPlease();
                        
                                // disables backspace on page except on input fields and textarea..
                                document.body.onkeydown = function (e) {
                                    var elm = e.target.nodeName.toLowerCase();
                                    if (e.which === 8 && (elm !== 'input' && elm  !== 'textarea')) {
                                        e.preventDefault();
                                    }
                                    // stopping event bubbling up the DOM tree..
                                    e.stopPropagation();
                                };
                                
                            };
                        
             })(window);
            dateFieldvalid = true;
        var staffValue = $('#checkStaff').val();
        var staffSecondContact = $('#staffSecondContact').val();
        	console.log(staffValue,'staff value');
            console.log(staffSecondContact,'Staff Second Contact value');
            if(staffValue == 'staff'){
                $('#pcfirst').css('display','block');
                $('#textForename, #textSurname, #textEmail,#textMobile,#due-Date').prop('readonly', true);
                // $('.dynmaic-radio-fields input, .gender-title-select select').prop('disabled', true);
                $('.contact_check input,.first-person-title select,.first-person-gender td input').prop('disabled', true);
            }
       		else {
               $('#textForename, #textSurname, #textEmail, #textMobile,#due-Date').prop('readonly', false);
                // $('.dynmaic-radio-fields input, .gender-title-select select').prop('disabled', false);
                $('.contact_check input,.first-person-title select,.first-person-gender td input').prop('disabled', false);
            }
            if(staffSecondContact == 'true'){
                console.log(staffSecondContact,'Staff Second Contact value if');
                $('#person-clear').css('display', 'none');
                $('#secondMembership').show();
                 $('#textForenamePartner, #textSurnamePartner, #textForenamePartner,#textTelephoneHomePartner,#textEmailPartner').prop('readonly', true);
                $('#secondMembership td input , #secondMembership .mrtitle select').prop('disabled', true);
                $('#twomem').prop('checked', true);
            }
            else {
                console.log(staffSecondContact,'Staff Second Contact value else');
                $('#textForenamePartner, #textSurnamePartner, #textForenamePartner, #textTelephoneHomePartner,#textEmailPartner').prop('readonly', false);
                $('#secondMembership td input, #secondMembership .mrtitle select').prop('disabled', false);
                $('#twomem').prop('checked', false);
            }
            /*
        	$('#scd1').keypress(function(e) {
                var scd1Value = $('#scd1').val();
                if(scd1Value.length == 2) {
                	$('#scd2').focus();
                }
            });
        	$('#scd2').keypress(function(e) {
                var scd2Value = $('#scd2').val();
                if(scd2Value.length == 2) {
                	$('#scd3').focus();
                }
            }); */
        	$('#scd3').keyup(function(e) {
                var scd3Value = $('#scd3').val();
                if(scd3Value.length == 2) {
                	$('#accountNumber').focus();
                }
            });
            $("#textMobile, #scd1, #scd2, #scd3, #accountNumber, #textTelephoneHomePartner").keydown(function (e) {
                    if ($.inArray(e.keyCode, [46, 8, 9, 27, 13, 110]) !== -1 ||
                        (e.keyCode === 65 && (e.ctrlKey === true || e.metaKey === true)) ||
                        (e.keyCode >= 35 && e.keyCode <= 40)) {
                            return;
                    }
                    if ((e.shiftKey || (e.keyCode < 48 || e.keyCode > 57)) && (e.keyCode < 96 || e.keyCode > 105)) {
                        e.preventDefault();
                    }
                });
            $("#secondMembership").hide();
            if(staffSecondContact == 'true'){
                $('#secondMembership').show();
            }
            $('#giftaid').hide(); // 11/27/2018 changes start here
            $("#direct_debit_block").hide();
            $("#gift_aid_block").hide(); // 11/27/2018 changes start here
            // **************** hide the secondMember deatails ***************//

                $("#twomem").change(function () {
                    var twomem = $(this)[0].checked;
                    console.log($(this)[0].checked);
                    if (twomem == true) {
                        $("#secondMembership").show();
                    }
                    else {
                        $("#secondMembership").hide();
                    }
                })
                $('#selectBranch').change(function() {

                    if (($('#selectBranch :selected').val() != '')) {
                        var selectBranch = $('#selectBranch :selected').val();

                    }

                })
               	$('#salutation').change(function() {
                    console.log("GO!");
                    console.log($('#salutation :selected').val());

                    if (($('#salutation :selected').val() != '')) {
                        var salutation = $('#salutation :selected').val();

                    }

                })
                
                $('#textEmail').on('blur change keyup',function(){
                    console.log("blur evebnt called",$('#textEmail').val());
                      membershipDupeChecker($('#textEmail').val());
                })
        		
                $("#postcode_checker").click(function () {
                    console.log($('#postcode').val());
                    
                        postCodeVal($('#postcode').val(),$('#textEmail').val());
              
                    /*var varible = $('.memberexist input').val();
                    if(varible == "true" ){
                      $('#MembershipalertModal').modal();
                      $('.modal-body').html('<div>' + "Membership already Exists in the System with" +" "+ $('#textEmail').val()+'</div>');
                    }*/
                })
                $("#nameSubmit").click(function () {
                    
                    // --------------------------
                        var branch = $('#selectBranch :selected').text();
                        if (branch == "") {
                        $('#MembershipalertModal').modal();
                        $('.modal-body').html('<div>' + 'Please click on "Find Address" to select address and NCT Branch.' + '</div>');
                            return false
                        }
                        else {
                            $('#selectBranch').removeClass('error');
                        }
                    //------------------------------
                    
                     setInterval(function(){
                        var membershiptype = $("#membershiptype").text();
                        if(membershiptype === ''){
                            $('select#selectMembership').addClass('hide');
                            $('#membershiptype-loader').addClass('show-loader');
                        }
                        else {
                            $('select#selectMembership').removeClass('hide');
                            $('#membershiptype-loader').removeClass('show-loader');
                        }
                    },100)
                    var salutation = $('#salutation :selected').text();

                    var existContact = $('#hdn').val();
                    var varible = $('.memberexist input').val();
                    if(varible == "true" ){
                      $('#MembershipalertModal').modal();
                      $('.modal-body').html('<div>' + "Membership already Exists in the System with" +" "+ $('#textEmail').val()+'</div>');
                    }else{
                        console.log(existContact);//&& existContact =='false'
                        //SelBranchValFunction($(selBnchvalue).val());
                        if(validateJoin() && dateFieldvalid) {
                            //if(staffValue != 'staff' ){//&& validateGender()
                            /*if(staffValue == 'staff' ){
                                $(selectBranch).val('');
                            }*/
                            afunction($(twomem)[0].checked,$('#textForename').val(),$('#textSurname').val(),$('#textEmail').val(),
                              $('#textMobile').val(),$('#textForenamePartner').val(),$('#textSurnamePartner').val(),
                              $('#textEmailPartner').val(),$('#textTelephoneHomePartner').val(),$('#postcode').val(),
                              $('#due-Date').val(),$(selectBranch).val(),$('#gender').val(),
                              $('#address_line_1').val()+$('#textAddress2').val()+$('#textAddress3').val(),
                              $('#town').val(),$('#county').val());
                        
                            //var gender = $('input[name=gender]':checked).val();
                            $('#register_li').removeClass('active');
                            $('#payment_li').addClass('active');
                            $('#register').removeClass('active show');
                            $('#payment').addClass('active show');
                            $("html, body").animate({ scrollTop: 0 }, "slow");

                            //}
                           /* else {
                                afunction($(twomem)[0].checked,$('#textForename').val(),$('#textSurname').val(),$('#textEmail').val(),
                                  $('#textMobile').val(),$('#textForenamePartner').val(),$('#textSurnamePartner').val(),$('#textEmailPartner').val(),
                                  $('#textTelephoneHomePartner').val(),$('#postcode').val(),$('#due-Date').val(),$(selectBranch).val(),$('#gender').val(),
                                  $('#address_line_1').val()+$('#textAddress2').val()+$('#textAddress3').val(),$('#town').val(),
                                  $('#county').val());
                        
                                $('#thankyou_li').addClass('active');
                                $('#thankyou').addClass('active show');
                                $('#register_li').removeClass('active');
                                $('#register').removeClass('active show');
                                console.log($('#membershipText').val(),"staff memebership");
                            }*/
                            $('#nameSubmit').prop('disabled', true);
                        }
                        else {
                        	$('#nameSubmit').prop('disabled', false);
                        }
                    }
                });
                $("#confirm_all_pay_cc").click(function () {
					setInterval(function(){
                        var loaderNumber = $("span[id$='membershipNumber']").text();
                        if( loaderNumber === '') {
                        	$('#membership-loader').addClass('show-loader');
                            console.log("no textttt");
                        }
                        else {
                        	$('#membership-loader').removeClass('show-loader');
                            console.log("textttt");
                        }
                    },500)
                    var forename_Dsp = $('#textForename').val();
                    $('#confirmation_li').removeClass('active');
                    $('#thankyou_li').addClass('active');
                    $('#confirmation').removeClass('active show');
                    $('#thankyou').addClass('active show');
                    $('#forename_Dsp').html(forename_Dsp);
                    $("html, body").animate({ scrollTop: 0 }, "slow");

                });
                $("#confirm_all_pay_dd").click(function () {

                    setInterval(function(){
                        console.log("ffgfgdfgdfgddf");
                        var loaderNumber = $("span[id$='membershipNumber']").text();
                        if( loaderNumber === '') {
                        	$('#membership-loader').addClass('show-loader');
                            console.log("no textttt");
                        }
                        else {
                        	$('#membership-loader').removeClass('show-loader');
                            console.log("textttt");
                        }
                    },500)
                    var accountName = $('#accountName').val();
                    var sortCode1 = $('#scd1').val();
                    var sortCode2 = $('#scd2').val();
                    var sortCode3 = $('#scd3').val();
                    var sortCode = sortCode1 + sortCode2 + sortCode3;
                    var accountNumber = $('#accountNumber').val();
                    var giftAidCheckbox= $('#giftAidCheckbox')[0].checked;
                    saveRecordValues(accountName,sortCode,accountNumber,giftAidCheckbox);
                    var forename_Dsp = $('#textForename').val();
                    $('#confirmation_li').removeClass('active');
                    $('#thankyou_li').addClass('active');
                    $('#confirmation').removeClass('active show');
                    $('#thankyou').addClass('active show');
                    $('#forename_Dsp').html(forename_Dsp);
                    $("html, body").animate({ scrollTop: 0 }, "slow");

                });
                $("#direct_pay_btn").click(function () {

                    //saveRecordValues(accountName,sortCode,accountNumber,$('#selectMembership :selected').val());
                    if (validatePayment()) {
                        $('#payment_li').removeClass('active');
                        // $('#confirmation_li').addClass('active');
                        // $('#payment').removeClass('active show');
                        // $('#confirmation').addClass('active show');
                        // $('#credit_card_confirm').hide();
                        // $('#direct_debit_confirm').show();
                        $('#gift_li').addClass('active');
                        $("#direct_debit_block").hide();
                        $("#gift_aid_block").show();
                        $("html, body").animate({
                            scrollTop: 0
                        }, "slow");
                    }

                    return;
                });
                $('#person-clear').on('click',function(){
                    $('#textForenamePartner, #textSurnamePartner, #textEmailPartner, #textTelephoneHomePartner').val('');
                });
                function validatePayment() {
                    error = "";
                    if($('#accountName').val() == "") {
                        error = error + "Please Enter Account Name.\n" + "<br>";
                        $('#accountName').addClass('error');
                    }
                    /*
                    if($('#scd1').val() == ""){
                        error = error + "Please Enter Code.\n";
                        $('#scd1').addClass('error');
                    }
                    if($('#scd2').val() == ""){
                        error = error + "Please Enter Code.\n";
                        $('#scd2').addClass('error');
                    }
                    if($('#scd3').val() == ""){
                        error = error + "Please Enter Code.\n";
                        $('#scd3').addClass('error');
                    }
                    */
                      //  sort code tab functionality error message  --- //
                    	var sort1 = $('#scd1').val();
                        var sort2 =$('#scd2').val();
                        var sort3 = $('#scd3').val();
                        if (sort1 == "" || sort2 == "" || sort3 == "" ) {
                            error = error + "Please Enter Sort Code .\n"  + "<br>";
                              $('#scd3, #scd2 , #scd1').addClass('error');
                        } else{

                            if (sort1.length != 2 || sort2.length != 2 || sort3.length != 2 ) {
                                error = error + "Sort Code allows two digits in each field.\n"  + "<br>";
                                $('#scd3, #scd2 , #scd1').addClass('error');
                            }
                        }

                    // sort code error message ends here --- //

                    if($('#accountNumber').val() == ""){
                        error = error + "Please Enter Account Number.\n" + "<br>";
                        $('#accountNumber').addClass('error');
                    }

                    if (!($('#checkboxConfirm').is(':checked'))) {
                        error = error + "Please Tick the Agree to Terms of Use. \n" + "<br>";
                        //$('.checkbox-error').removeClass('hide')
                    }
                    // else {
                        // $('.checkbox-error').addClass('hide');
                    // }

                    if (error != "") {
                         //alert(error);
                        $('#MembershipalertModal').modal();
                     	$('.modal-body').html('<div>' + error + '</div>');
                        return false;
                    } else {
                        return true;
                    }

                }
             // **************** hide the secondMember deatails ***************//
        })
    </script>
    <script>
    $(function() {
         var giftAidExec = false;
        console.log( "ready!" ); //branch
        var cardPayment = false;
        $('#selectMembership').change(function() {
            var paymentType = $('#selectMembership :selected').text().includes('Credit');
            var staffPayment = $('#selectMembership :selected').text().includes('Life Membership - Free')
            if (paymentType === true || staffPayment === true){
                $("#Pay_now, #gift_aid_btn, #direct_pay_btn, #confirm_all_pay_dd").html('Sign Up');
            }
            else {
                $("#Pay_now, #gift_aid_btn, #direct_pay_btn, #confirm_all_pay_dd").html('Sign Up');
            }

            $("#Pay_now").click(function (){
                if($('.messageTable')[0]){
                    console.log("class exists");
                     location.reload();
                 }
                 else {
                    console.log("class not exists");
                 }
                var today = new Date();
                var dateValues;
                var daysInMonths;
                var dd = today.getDate();
                var mm = today.getMonth()+1;
                var yyyy = today.getFullYear();
                function myFunction() {
                    var today = new Date();
                    var month = today.getMonth();
                    daysInMonths = daysInMonth(month + 1, today.getFullYear());
                    if( (dd + 10) > daysInMonths){
                        var dateValue = (dd + 10) - daysInMonths;
                        if(dateValue >= 3){
                           $('#payment-date').text('03'+'/' +'0'+(today.getMonth()+3)+   '/' + today.getFullYear());
                        }
                        else {
                            $('#payment-date').text( '03'+'/' +'0'+(today.getMonth()+2) + '/' + today.getFullYear());
                        }
                    }
                    else {
                        $('#payment-date').text('03'+ '/'+'0'+(today.getMonth()+2)+ '/' + today.getFullYear());
                    }
                }
                
                function daysInMonth(month,year) {
                    return new Date(year, month, 0).getDate();
                }
                myFunction();
                var staffPayment = $('#selectMembership :selected').text().includes('Life Membership - Free')
                if (staffPayment === true){
                    //saveRecordValues(accountName);
                  setInterval(function(){
                        var loaderNumber = $("span[id$='membershipNumber']").text();
                        if( loaderNumber === '') {
                        	$('#membership-loader').addClass('show-loader');
                            console.log("no textttt");
                        }
                        else {
                        	$('#membership-loader').removeClass('show-loader');
                            console.log("textttt");
                        }
                  },500)  
            	}
                if( $('#selectMembership :selected').text().includes('per quarter')){
                	$('.eighteen-months-membership').removeClass('hide');
               	}
                else {
                	$('.eighteen-months-membership').addClass('hide');
                }
                //setInterval(function(){
                //var membershipTypeText = $('#membershipSelection > span').text();
                // if(membershipTypeText.includes('Individual 18 month membership')){
                //     $('.eighteen-months-membership').removeClass('hide');
                // }
                // else{
                //     $('.eighteen-months-membership').addClass('hide');
                //}
                // },200);
                if (($('#selectMembership :selected').val() == '' ||  $('#selectMembership :selected').val() == 'Please select')){
                    $('#selectMembership select').addClass('error-border');
                     //alert("Please select your membership type");
                    $('#MembershipalertModal').modal();
                    $('.modal-body').html('<div>' + "Please select your membership type" + '</div>');
                    return false;
                }
                else {
                    $('#selectMembership select').removeClass('error-border');
                }
                if (($('#selectMembership :selected').val() != '')) {
                    var lifeMembership;
                    if(($('#selectMembership :selected').text().includes('Life Membership - Free'))){
                    	lifeMembership = true;
                        SelValFunction($('#selectMembership :selected').val(),lifeMembership);
                    }
                    else{
                        lifeMembership = false;
                        SelValFunction($('#selectMembership :selected').val(),lifeMembership);
                    }
                    
                    console.log($('#selectMembership :selected').text().includes('Credit'));
                    $("#direct_debit_block").show();
                    if(($('#selectMembership :selected').text().includes('Credit'))){
                        // $("#direct_debit_block").append( "<div class='col-md-7'><div class='loader'></div></div>" );
                        // $("#direct_debit_block").append( "<div class='col-md-7'><div class='loader'><img src='/resource/1543388581000/nctapp/nct-app/assets/nctmembers-logo.png' /><div>Loading...</div></div></div>" );
                        $('#payment_li').removeClass('active');
                        //$('#thankyou_li').addClass('active');
                        //$('#payment').removeClass('in active show');
                        //$('#thankyou').addClass('active show');
                        $('#gift_li').addClass('active')
                        $("#direct_debit_block").hide();
                        $("#gift_aid_block").show();
                        cardPayment = true;
                        console.log(cardPayment, "cardPayment");
                        $("html, body").animate({ scrollTop: 0 }, "slow");
                    }
                    else {
                        cardPayment = false;
                        console.log(cardPayment, "cardPayment");
                    }
                    if(($('#selectMembership :selected').text().includes('Life Membership - Free'))){
                        cardPayment = false;
                        $('#Pay_now').html('Sign Up');
                    	$('#payment_li').removeClass('active');
                        $('#thankyou_li').addClass('active');
                        $('#payment').removeClass('active show');
                        $('#thankyou').addClass('active show');
                        //thankYouPage();
                    }

                    $("#pay_page").hide();
                    console.log($('#selectMembership :selected').text());
                    console.log("Direct Debitpage selected");

                    //$("#forename_Dsp").html(forename);
                    //$("#forename_Details").html(pay_userdata);
                    //$("#pay_money").html(pay_value);
                    return;
                } else {
                    console.log($('#selectMembership :selected').val());
                    $('#payment_li').removeClass('active');
                    $('#confirmation_li').addClass('active');
                    $('#payment').removeClass('in active show');
                    $('#confirmation').addClass('in active show');
                    $('#direct_debit_confirm').hide();
                    $('#credit_card_confirm').show();
                    //$("#credit_card_confirm").append( "<div class='col-md-7'><div class='loader'></div></div>" );
                    // 11/27/2018 changes start here
                    // $("#credit_card_confirm").append( "<div class='col-md-7'><div class='loader'><div>Loading...</div></div></div>" );
                    // 11/27/2018 changes end here
                    $("#forename_Cc").html(pay_userdata);
                    //$("#pay_money_cc").html(pay_value);
                    $('#accountName').prop('required',false);
                    $('#accountNumber').prop('required',false);
                    $('#scd1').prop('required',false);
                    $('#scd2').prop('required',false);
                    $('#scd3').prop('required',false);
                    $('#checkboxConfirm').prop('required',false);
                    return;
                }
            });
        });

         $('#pay_now_back').on('click', function(){
             if($('.messageTable')[0]){
             	console.log("class exists");
                 location.reload();
             }
             else {
             	console.log("class not exists");
             }
             $('#nameSubmit').prop('disabled', false);
            $('#payment').removeClass('active show');
            $('#payment_li').removeClass('active');
            $('#register_li').addClass('active');
            $('#register').addClass('active show');
             var staffValue = $('#checkStaff').val();
            if(staffValue == 'staff'){
                $('#pcfirst').css('display','block');
                $('#textForename, #textSurname, #textEmail,#textMobile,#due-Date').prop('readonly', true);
                // $('.dynmaic-radio-fields input, .gender-title-select select').prop('disabled', true);
                $('.contact_check input,.first-person-title select,.first-person-gender td input').prop('disabled', true);
            }
       		else {
               $('#textForename, #textSurname, #textEmail, #textMobile,#due-Date').prop('readonly', false);
                // $('.dynmaic-radio-fields input, .gender-title-select select').prop('disabled', false);
                $('.contact_check input,.first-person-title select,.first-person-gender td input').prop('disabled', false);
            }
        });
        $('#direct_pay_back').on('click', function(){

            $('#direct_debit_block').css('display', 'none');
            $('#pay_page').css('display', '');
            afunction($(twomem)[0].checked,$('#textForename').val(),$('#textSurname').val(),$('#textEmail').val(),
                      $('#textMobile').val(),$('#textForenamePartner').val(),$('#textSurnamePartner').val(),
                      $('#textEmailPartner').val(),$('#textTelephoneHomePartner').val(),$('#postcode').val(),
                      $('#due-Date').val(),$(selectBranch).val(),$('#gender').val(),
                      $('#address_line_1').val()+$('#textAddress2').val()+$('#textAddress3').val(),
                      $('#town').val(),$('#county').val());
            
        });
         $('#go-back-payment').on('click', function(){
            $('#direct_debit_block').css('display', 'none');
            $('#pay_page').css('display', '');
        });
        $('#gift_aid_back').on('click', function(){
            $('#giftAidCheckbox').prop('checked', false);
            if(cardPayment === false) {
                $('#direct_debit_block').show();
                $('#gift_aid_block').hide();
                $('#gift_li').removeClass('active');
                $('#payment_li').addClass('active');
            }
            else {
            	 $('#direct_debit_block').hide();
                $('#gift_aid_block').hide();
                $('#gift_li').removeClass('active');
                $('#payment_li').addClass('active');
                $('#payment').addClass('active show');
                $('#pay_page').show();
            }
        });
       $('#direct_debit_back').on('click', function(){
           $('#gift_aid_btn').prop('disabled', false);
            $('#confirmation').removeClass('active show');
            $('#confirmation_li').removeClass('active');
            $('#gift_aid_block').show();
            $('#gift_li').addClass('active');
            $('#payment').addClass('active show');
        });
        $('#gift_aid_btn').on('click', function(){
                    setInterval(function(){
                        var loaderNumber = $("span[id$='membershipNumber']").text();
                        if( loaderNumber === '') {
                        	$('#membership-loader').addClass('show-loader');
                        }
                        else {
                        	$('#membership-loader').removeClass('show-loader');
                        }
                    },200)
                    
            if (cardPayment === true) {
                    setInterval(function() {
                    giftAidExec = $("[id$='onComplete']").val();
                      console.log(typeof giftAidExec, 'giftAidExec');
                      if(giftAidExec == 'true') {
                    var accountName = $('#accountName').val();
                    var sortCode1 = $('#scd1').val();
                    var sortCode2 = $('#scd2').val();
                    var sortCode3 = $('#scd3').val();
                    var sortCode = sortCode1 + sortCode2 + sortCode3;
                    var accountNumber = $('#accountNumber').val();
                    var giftAidCheckbox= $('#giftAidCheckbox')[0].checked;
            		if (cardPayment === true) {
            			giftAidCreation(giftAidCheckbox);
                    }
                    $('#payment_li, #gift_li').removeClass('active');
                    $('#confirmation_li').addClass('active');
                    $('#payment').removeClass('active show');
                    $('#confirmation').addClass('active show');
                    $('#credit_card_confirm').hide();
                    $("#gift_aid_block").hide();
                    $("#DD_acc_name").html(accountName);
                    $("#DD_sort_code").html(sortCode);
                    $("#DD_bank_acc_num").html(accountNumber);
                    if (cardPayment === true) {           
                        $('#thankyou').addClass('active show');
                        $('#thankyou_li').addClass('active');
                        $('#payment').removeClass('active show');
                        $('#confirmation').removeClass('active show');
                        $('#confirmation_li').removeClass('active');
                        $('#payment_li').removeClass('active');
                        $('#gift_aid_block').hide();
            			$('#gift_li').removeClass('active');
                    }
                          $("[id$='onComplete']").val(false);
                          }
                          
                   }, 2000)
                   } else {
                            var accountName = $('#accountName').val();
                            var sortCode1 = $('#scd1').val();
                            var sortCode2 = $('#scd2').val();
                            var sortCode3 = $('#scd3').val();
                            var sortCode = sortCode1 + sortCode2 + sortCode3;
                            var accountNumber = $('#accountNumber').val();
                            var giftAidCheckbox= $('#giftAidCheckbox')[0].checked;
                            $('#payment_li, #gift_li').removeClass('active');
                            $('#confirmation_li').addClass('active');
                            $('#payment').removeClass('active show');
                            $('#confirmation').addClass('active show');
                            $('#credit_card_confirm').hide();
                            $("#gift_aid_block").hide();
                            $("#DD_acc_name").html(accountName);
                            $("#DD_sort_code").html(sortCode);
                            $("#DD_bank_acc_num").html(accountNumber);
                        }
                        $('#gift_aid_btn').prop('disabled', true);
                        });
             

    });
    </script>
   <script>
		$(document).ready(function () {
              $('#pay_now_again').on('click', function(){
             $('#direct_debit_block').css('display', 'none');
            $('#pay_page').css('display', '');
        });
        $('#edit-submit').on('click', function () {
            $("#edit-keys").addClass('show-form-input', {
                duration: 1000
            });
            $("#search-submit").removeClass('d-none');
            $(this).addClass('d-none');
            $('#show-close-btn').addClass('show-close-btn', {
                duration: 1000
            });
        });
        $('#show-close-btn').on('click', function () {
            $("#edit-keys").removeClass('show-form-input');
            $("#search-submit").addClass('d-none');
            $('#show-close-btn').removeClass('show-close-btn');
            $('#edit-submit').removeClass('d-none');
        });
        $('.expand-collapse-elements, #collapse-btn').hide();
        $('#expand-btn').on('click', function () {
            $('.expand-collapse-elements, #collapse-btn').slideToggle( "slow", function() {
            });
            $('#expand-btn').slideToggle( "slow", function() {
            });
        });
        $('#collapse-btn').on('click', function () {
            $('.expand-collapse-elements, #collapse-btn').slideToggle( "slow", function() {
            });
            $('#expand-btn').slideToggle( "slow", function() {
            });
        });
    })
	</script>
    <script>

        $(document).ready(function () {
            $('.scd').keyup(function(){
             if(this.value.length == this.maxLength){
                 var $next = $(this).next('.scd');
                    if ($next.length){
                        $(this).next('.scd').focus();
                      }else{
                            $(this).blur();
                      }
             }
          });
        // date validation start
            
            $("#due-Date").blur(function(e){
                
            	 	date = e.target.value;
                    if(date == undefined){
                        $('#MembershipalertModal').modal();
                        $('.modal-body').html('<div>' + "Please Enter Valid Date"+ '</div>');
                        $('#due-Date').addClass('error');
                         dateFieldvalid = false;
                        
                     }else if(date !== ""){
                            var  currentDate = new Date();
                            var  currentYear = currentDate.getFullYear();
                            var  userDate = new Date(date);
                            var  year = userDate.getFullYear();
                            var  yearLength = year.toString().length;
                            if(yearLength == 4 && (currentDate.getTime() < userDate.getTime()) ){
                                console.log("success");
                                $('#due-Date').removeClass('error');
                                dateFieldvalid = true;
                               
                            }else{
                                $('#MembershipalertModal').modal();
                                $('.modal-body').html('<div>' + "Date Must be Greater than currentDate" + '</div>');
                                $('#due-Date').addClass('error');
                                 dateFieldvalid = false;
                            }
                	}else{
                    	 $('#due-Date').val('dd-mm-yyyy');
                         $('#due-Date').removeClass('error');
                        dateFieldvalid = true;
                        
                    }
                
            });
            
            $("#nameSubmit").click(function(){

                var recheck = $('#due-Date').val();
                 if ( dateFieldvalid == false && recheck !== "" ) {
                    $('#MembershipalertModal').modal();
                    $('.modal-body').html('<div>' + "Please Enter Valid Date"+ '</div>');
                    $('#due-Date').css({"border":"1px solid red", "background-color":"rgba(255, 0, 0, 0.25)"});
                }else{
                        dateFieldvalid = true;
                    	$('#due-Date').removeClass('error');
                }
            });
            
            //date validation ends here

        });
      </script>
</body>
</apex:form>
</apex:page>